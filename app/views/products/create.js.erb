/* Check if there are any errors */

if(<%= @product.errors.any? %>){
	var key;
	var value;

	<% @product.errors.each do |key, value| %>
		key = "<%= key %>";
		value = "<%= value %>";
		handleError('product', key, value);
	<% end %>
}

/* If there aren't, render the new tab */

else {
	// Disable the submit (next) button.
	$("#next-step").attr('disabled', 'true');

	// Render the next step and bind events.
	$next_step = $("<%= j render 'second_step' %>");
	$("#new_product").fadeOut( function(){
		// Delete current step, then display the next one.
		$(this).after($next_step);
		$(this).remove();
		$("#next-step").attr('disabled', 'true');
		$("#new-product.cancel").attr('disabled', 'true');

		$("#edit_product_<%= @product.id %>").hide().fadeIn( function(){
			$("#next-step").removeAttr('disabled');
			$("#new-product.cancel").removeAttr('disabled');
		});

	});
}